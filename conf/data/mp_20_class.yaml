root_path: ${PROJECT_ROOT}/data/mp_20_class

prop: 
  - formation_energy_per_atom
  # - band_gap
#  - e_above_hull

prop_classes:
#  - Class_formation_energy_per_atom
  # - Class_band_gap
#  - Class_e_above_hull
  - Class_lattice_type

prop_num_classes:
#  - 6
  # - 4
#  - 5
  - 7

num_targets: 1
# prop: scaled_lattice
# num_targets: 6
niggli: true
primitive: False
graph_method: crystalnn
lattice_scale_method: scale_length
preprocess_workers: 30
readout: mean
max_atoms: 20
otf_graph: false
eval_model_name: mp20_class


train_max_epochs: 1000
early_stopping_patience: 100000 # ของเดิมคือจำนวนที่ val แล้วไม่ดีขึ้นก่อนที่จะ stop
early_stopping_patience_epoch: 300
teacher_forcing_max_epoch: 500


datamodule:
  _target_: CrystDataModule

  datasets:
    train:
      _target_: cdvae.pl_data.dataset.CrystDataset
      name: Formation energy train
      path: ${data.root_path}/train_mp_class.csv
      prop: ${data.prop}
      prop_classes: ${data.prop_classes}
      niggli: ${data.niggli}
      primitive: ${data.primitive}
      graph_method: ${data.graph_method}
      lattice_scale_method: ${data.lattice_scale_method}
      preprocess_workers: ${data.preprocess_workers}

    val:
      - _target_: cdvae.pl_data.dataset.CrystDataset
        name: Formation energy val
        path: ${data.root_path}/val_mp_class.csv
        prop: ${data.prop}
        prop_classes: ${data.prop_classes}
        niggli: ${data.niggli}
        primitive: ${data.primitive}
        graph_method: ${data.graph_method}
        lattice_scale_method: ${data.lattice_scale_method}
        preprocess_workers: ${data.preprocess_workers}

    test:
      - _target_: cdvae.pl_data.dataset.CrystDataset
        name: Formation energy test
        path: ${data.root_path}/test_mp_class.csv
        prop: ${data.prop}
        prop_classes: ${data.prop_classes}
        niggli: ${data.niggli}
        primitive: ${data.primitive}
        graph_method: ${data.graph_method}
        lattice_scale_method: ${data.lattice_scale_method}
        preprocess_workers: ${data.preprocess_workers}

  num_workers:
    train: 0
    val: 0
    test: 0

  batch_size:
    train: 256
    val: 256
    test: 256
